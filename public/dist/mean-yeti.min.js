function ApiService(a){function b(b){return a({method:"GET",url:g+b,cache:!1})}function c(b,c){return a({method:"GET",url:g+b+"/"+c,cache:!1})}function d(b,c){return console.log("CREATING "+b),console.log(c),a({method:"POST",url:g+b,data:c})}function e(b,c){return a({method:"DELETE",url:g+b+"/"+c})}function f(b,c,d){return a({method:"PUT",url:g+b+"/"+c,data:d})}var g="/api/",h={project:"projects",resource:"resources",task:"tasks",team:"teams",user:"users"},i={getAll:b,getOne:c,create:d,remove:e,update:f,endpoint:h};return i}angular.module("mean-yeti",["ngSanitize"]).config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]),function(a){"use strict";function b(b,c){function d(){H.refreshData()}function e(){G.editingProject=!1,G.editingProjectInfo=void 0,G.editingTask=!1,G.editingTaskInfo=void 0,G.editingTeam=!1,G.editingTeamInfo=void 0,G.editingResource=!1,G.editingResourceInfo=void 0,G.editingUser=!1,G.editingUserInfo=void 0}function f(){e(),c.getAll("projects").then(function(a){G.projects=a.data,c.getAll("tasks").then(function(a){G.tasks=a.data,c.getAll("teams").then(function(a){G.teams=a.data,c.getAll("resources").then(function(a){G.resources=a.data,c.getAll("users").then(function(a){G.users=a.data})})})})})}function g(a){H.refreshData(),G.showing=a}function h(){G.editingProjectInfo.deliverables=G.editingProjectInfo.deliverables.split(","),G.editingProjectInfo.tags=G.editingProjectInfo.tags.split(","),c.create(c.endpoint.project,G.editingProjectInfo).then(function(){G.editingProject=!1,H.selectDataType("projects")})}function i(){console.log(G.editingProjectInfo),G.editingProjectInfo.deliverables=G.editingProjectInfo.deliverables.split(","),G.editingProjectInfo.tags=G.editingProjectInfo.tags.split(","),c.update(c.endpoint.project,G.editingProjectInfo._id,G.editingProjectInfo).then(function(){G.editingProject=!1,H.selectDataType("projects")})}function j(b){G.editingProject=!0,G.editingProjectInfo=a.copy(b),console.log(G.editingProjectInfo),void 0===G.editingProjectInfo?(G.isNewItem=!0,G.editingProjectInfo={name:"",description:"",startDate:new Date,endDate:new Date,externalTasks:[],tags:[],team:"",deliverables:"",systems:[]}):(void 0===G.editingProjectInfo.externalTasks&&(G.editingProjectInfo.externalTasks=[]),G.editingProjectInfo.deliverables=G.editingProjectInfo.deliverables.join(", "),G.editingProjectInfo.tags=G.editingProjectInfo.tags.join(", "),G.editingProjectInfo.startDate=new Date(b.startDate),G.editingProjectInfo.endDate=new Date(b.endDate),G.isNewItem=!1)}function k(a){c.remove("projects",a).then(function(){H.selectDataType("projects")})}function l(a){var b=G.editingProjectInfo.systems.indexOf(a);b>-1?G.editingProjectInfo.systems.splice(b,1):G.editingProjectInfo.systems.push(a)}function m(a){var b=G.editingProjectInfo.externalTasks.indexOf(a);b>-1?G.editingProjectInfo.externalTasks.splice(b,1):G.editingProjectInfo.externalTasks.push(a)}function n(){c.create(c.endpoint.task,G.editingTaskInfo).then(function(){G.editingTask=!1,H.selectDataType("tasks")})}function o(){c.update(c.endpoint.task,G.editingTaskInfo._id,G.editingTaskInfo).then(function(){G.editingTask=!1,H.selectDataType("tasks")})}function p(b){G.editingTask=!0,G.editingTaskInfo=a.copy(b),void 0===G.editingTaskInfo?(G.isNewItem=!0,G.editingTaskInfo={name:"",note:"",isComplete:!1,project:"",hourEstimate:0,hoursBurned:0,startDate:new Date,endDate:new Date}):(G.editingTaskInfo.startDate=new Date(b.startDate),G.editingTaskInfo.endDate=new Date(b.endDate),G.isNewItem=!1)}function q(a){c.remove("tasks",a).then(function(){H.selectDataType("tasks")})}function r(){c.create(c.endpoint.team,G.editingTeamInfo).then(function(){G.editingTeam=!1,H.selectDataType("teams")})}function s(){c.update(c.endpoint.team,G.editingTeamInfo._id,G.editingTeamInfo).then(function(){G.editingTeam=!1,H.selectDataType("teams")})}function t(b){G.editingTeam=!0,G.editingTeamInfo=a.copy(b),void 0===G.editingTeamInfo?(G.isNewItem=!0,G.editingTeamInfo={name:"",resources:[]}):G.isNewItem=!1}function u(a){c.remove("teams",a).then(function(){H.selectDataType("teams")})}function v(){G.editingResourceInfo.skills=G.editingResourceInfo.skills.split(","),c.create(c.endpoint.resource,G.editingResourceInfo).then(function(a){console.log(a.data),z(a.data),G.editingResource=!1,H.selectDataType("resources")})}function w(){G.editingResourceInfo.skills=G.editingResourceInfo.skills.split(","),z(G.editingResourceInfo),c.update(c.endpoint.resource,G.editingResourceInfo._id,G.editingResourceInfo).then(function(){G.editingResource=!1,H.selectDataType("resources")})}function x(b){G.editingResource=!0,G.editingResourceInfo=a.copy(b),G.selectedTeamsForResource=[],void 0===G.editingResourceInfo?(G.isNewItem=!0,G.editingResourceInfo={name:"",role:"",tasks:[],skills:""}):(G.editingResourceInfo.skills=G.editingResourceInfo.skills.join(", "),G.teams.forEach(function(a){a.resources.includes(b._id)&&G.selectedTeamsForResource.push(a._id)}),G.isNewItem=!1)}function y(a){c.remove("resources",a).then(function(){H.selectDataType("resources")})}function z(a){G.teams.forEach(function(b){var d=b.resources.indexOf(a._id);G.selectedTeamsForResource.includes(b._id)?d!==-1||(b.resources.push(a._id),c.update(c.endpoint.team,b._id,b)):d!==-1&&(b.resources.splice(d,1),c.update(c.endpoint.team,b._id,b))})}function A(a){var b=G.selectedTeamsForResource.indexOf(a);b>-1?G.selectedTeamsForResource.splice(b,1):G.selectedTeamsForResource.push(a)}function B(){c.create(c.endpoint.user,G.editingUserInfo).then(function(){G.editingUser=!1,H.selectDataType("users")})}function C(){c.update(c.endpoint.user,G.editingUserInfo._id,G.editingUserInfo).then(function(){G.editingUser=!1,H.selectDataType("users")})}function D(b){G.editingUser=!0,G.editingUserInfo=a.copy(b),void 0===G.editingUserInfo?(G.isNewItem=!0,G.editingUserInfo={name:"",pictureUrl:"",projects:[]}):G.isNewItem=!1}function E(a){c.remove("users",a).then(function(){H.selectDataType("users")})}function F(a){var b=G.editingUserInfo.projects.indexOf(a);b>-1?G.editingUserInfo.projects.splice(b,1):G.editingUserInfo.projects.push(a)}b.vm={};var G=b.vm;G.showing="",G.isNewItem=!1,G.editingProject=!1,G.editingProjectInfo=void 0,G.editingTask=!1,G.editingTaskInfo=void 0,G.editingTeam=!1,G.editingTeamInfo=void 0,G.editingResource=!1,G.editingResourceInfo=void 0,G.editingUser=!1,G.editingUserInfo=void 0,G.projects=[],G.tasks=[],G.teams=[],G.resources=[],G.users=[],G.systems=["BI","BB.com","TBB","Kibo","ByDesign","SOA","OAG","LifeRay","Analytics"],b.func={selectDataType:g,refreshData:f,clearEditing:e,editProject:j,deleteProject:k,createProject:h,updateProject:i,toggleSelectionOfSystemForProject:l,toggleSelectionOfExternalTaskForProject:m,editTask:p,deleteTask:q,createTask:n,updateTask:o,editTeam:t,deleteTeam:u,createTeam:r,updateTeam:s,editResource:x,deleteResource:y,createResource:v,updateResource:w,updateTeamAfterModifyingResource:z,toggleSelectionOfTeamForResource:A,editUser:D,deleteUser:E,createUser:B,updateUser:C,toggleSelectionOfProjectForUser:F};var H=b.func;d()}a.module("mean-yeti").controller("admin.controller",["$scope","Api",b])}(angular),function(a){function b(a,b){function c(){i.refreshData()}function d(){b.getAll("projects").then(function(a){h.projects=a.data,b.getAll("tasks").then(function(a){h.tasks=a.data,b.getAll("teams").then(function(a){h.teams=a.data,b.getAll("resources").then(function(a){h.resources=a.data,b.getAll("users").then(function(a){h.users=a.data,void 0===h.currentUser&&(h.currentUser=h.users[0],g())})})})})})}function e(a){h.currentUser=a}function f(a){h.selectedProject=a,drawChart()}function g(){var a=[],b=new google.visualization.DataTable;b.addColumn("string","Task ID"),b.addColumn("string","Task Name"),b.addColumn("string","Resource"),b.addColumn("date","Start Date"),b.addColumn("date","End Date"),b.addColumn("number","Duration"),b.addColumn("number","Percent Complete"),b.addColumn("string","Dependencies"),h.projects.forEach(function(b){var c=0,d="(none)";h.teams.forEach(function(a){a._id===b.team&&(d=a.name)}),a.push([b._id,b.name,d,new Date(b.startDate),new Date(b.endDate),null,c,null])}),b.addRows(a);var c={height:350,gantt:{trackHeight:30}},d=new google.visualization.Gantt(document.getElementById("chart_div"));d.draw(b,c)}a.vm={};var h=a.vm;h.projects=[],h.tasks=[],h.teams=[],h.resources=[],h.users=[],h.currentUser=void 0,h.selectedProject=void 0,a.func={refreshData:d,showSwitchUser:e,selectProject:f};var i=a.func;c()}a.module("mean-yeti").controller("index.controller",["$scope","Api",b])}(angular),angular.module("todoController",[]).controller("mainController",function(a,b,c){a.formData={},c.get().success(function(b){a.todos=b}),a.createTodo=function(){void 0!=a.formData.text&&c.create(a.formData).success(function(b){a.formData={},a.todos=b})},a.deleteTodo=function(b){c.delete(b).success(function(b){a.todos=b})}}),angular.module("mean-yeti").filter("findFavorites",function(){return function(a,b){return void 0===b?[]:a.filter(function(a){return b.indexOf(a._id)!==-1})}}),angular.module("mean-yeti").filter("firstWord",function(){return function(a){return void 0===a?"":a.split(" ")[0]}}),angular.module("mean-yeti").factory("Api",["$http",ApiService]),angular.module("todoService",[]).factory("Todos",function(a){return{get:function(){return a.get("/api/todos")},create:function(b){return a.post("/api/todos",b)},delete:function(b){return a.delete("/api/todos/"+b)}}});
//# sourceMappingURL=mean-yeti.js.map